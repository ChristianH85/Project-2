<div id="ani-device-detector"></div>
{{!-- <input name="file" type="file" class="cloudinary-fileupload" data-cloudinary-field="image_id" data-form-data="[upload-preset-and-other-upload-options-as-html-escaped-JSON-data]"></input>
--}}
{{!-- <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
 <script> var widget = cloudinary.createUploadWidget({
        cloudName: "dm2obdaq7",
        uploadPreset: "doggie",
        cropping: "server",
        tags: [""],
        folder: 'dog'
    }, (error, result) => {
        console.log(result)
    });
    widget.open("https://my.example.come/my_example_image.jpg");
    cloudinary.applyUploadWidget('#upload_widget_opener', {
        cloudName: 'dm2obdaq7',
        uploadPreset: 'doggie',
        tags: [""],
        cropping: true,
        folder: 'dog'
    }, (error, result) => {
        createPhotoRef(result)
    });

</script> --}}
{{!-- <img src ="http://res.cloudinary.com/dm2obdaq7/image/upload/v1543383507/dog/ibvcsj4sw1ufx0s7oqlw.jpg"> --}}

{{!-- changed from /api/upload-photos --}}

{{!-- <form action="/api/index" method="POST"  id="ani-form-upload-photos" enctype="multipart/form-data"> --}}
                 {{!-- </form> --}}
{{!-- ///experiment --}}
<form id="ani-form-compose" action="/api/index" method="POST">
    <div class="row">
        <div class="col s12 m10 offset-m1 l8 offset-l2 xl6 offset-xl3">
            <div class="card">
                <div class="card-content">
                    <div class="input-field">
                        <label for="ani-title" class="blue-grey-text text-darken-2">Title</label>
                        <input type="text" name="title" id="ani-title" class="validate" required>
                    </div>
                </div>
            </div>

            <div class="ani-separator-3"></div>
            
           <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
 <script> 
        ///array to store the urls
        let photoUrls = []
        var widget = cloudinary.createUploadWidget({
            cloudName: "dm2obdaq7",
            uploadPreset: "doggie",
            cropping: "server"
        }, (error, result) => {
            console.log(result)
            
            /// checks for successful upload then saves values to an array let photoUrls = []
            if (result.event === "success"){
                photoUrls.push(result.info.thumbnail_url)
                photoUrls.push(result.info.url) 
            }

        });
        console.log(photoUrls)
        widget.open("https://my.example.come/my_example_image.jpg");
        cloudinary.applyUploadWidget('#upload_widget_opener', {
            cloudName: 'dm2obdaq7',
            uploadPreset: 'doggie',
            tags: [""],
            cropping: true,
            folder: 'doggie'
        }, (error, result) => {
            //createPhotoRef(result)
        });
    

</script>

            <div class="card">
                <div class="card-image ani-card">
                    <img src="{{this.url}}">
                </div>

                <div class="card-content">
                    <div class="input-field">
                        <label for="ani-caption{{@index}}" class="blue-grey-text text-darken-2">Caption</label>
                        <input type="text" name="captions[{{@index}}]" id="ani-caption{{@index}}" class="validate" required>
                        <input type="hidden" name="urls[{{@index}}]" value="{{this.url}}">
                    </div>
                </div>
            </div>

            <div class="ani-separator-3"></div>
           

            <button type="submit" class="btn-large waves-effect waves-light" id = "addStory" title="Click to publish.">Publish</button>

            <div class="ani-separator-3"></div>
        </div>
    </div>
</form>
</form>
 {{!-- // commented out to create testing ground for uploads see also index.js ch --}}



{{!-- <!-- Signup -->
<div id="ani-signup" class="row ani-index ani-vertical-align-wrapper">
    <div class="col s12 m10 offset-m1 l7 offset-l4 xl5 offset-xl4">
        <div class="row">
            <div class="col s10 offset-s1">
                <h1>Dogs with Friends</h1>
                <p>Animals are beautiful people.</p>
            </div>

            <div class="col s10 offset-s1">
                <form id="ani-form-signup" action="/api/signup" method="POST">
                    <div class="input-field">
                        <label for="ani-fullname" class="blue-grey-text text-darken-2">Full name</label>
                        <input type="text" name="fullname" id="ani-fullname" class="validate" required>
                    </div>

                    <div class="input-field">
                        <label for="ani-email" class="blue-grey-text text-darken-2">Email</label>
                        <input type="text" name="email" id="ani-email" class="validate" required>
                    </div>
                    <div class="input-field">
                        <label for="pet-name" class="blue-grey-text text-darken-2">Pet Name</label>
                        <input type="text" name="pet" id="pet-name" class="validate" required>
                    </div>
                    <div class="input-field">
                        <label for="ani-username" class="blue-grey-text text-darken-2">Username</label>
                        <input type="text" name="username" id="ani-username" class="validate" required>
                    </div>

                    <div class="input-field">
                        <label for="ani-password" class="blue-grey-text text-darken-2">Password</label>
                        <input type="password" name="password" id="ani-password" class="validate" required>
                    </div>

                    <div class="ani-separator-2"></div>

                    <button type="submit" class="btn-large waves-effect waves-light" title="Click to sign up.">Sign up</button>
                </form>

                <div class="ani-separator-2"></div>
            </div>

            <div class="col s10 offset-s1">
                <a href="javascript:displayLogin();">Have an account? Log in.</a>

                <div class="ani-separator-3"></div>
            </div>
        </div>
    </div>
</div>

<!-- Login -->
<div id="ani-login" class="row ani-index ani-vertical-align-wrapper">
    <div class="col s12 m10 offset-m1 l7 offset-l4 xl5 offset-xl4">
        <div class="row">
            <div class="col s10 offset-s1">
                <h1>Dogs with Friends</h1>
                <p>Animals are beautiful people.</p>
            </div>

            <div class="col s10 offset-s1">
                <form id="ani-form-login" action="/api/login" method="POST">
                    <div class="input-field">
                        <label for="ani-login-username" class="blue-grey-text text-darken-2">Username</label>
                        <input type="text" name="username" id="ani-login-username" class="validate" required>
                    </div>

                    <div class="input-field">
                        <label for="ani-login-password" class="blue-grey-text text-darken-2">Password</label>
                        <input type="password" name="password" id="ani-login-password" class="validate" required>
                    </div>

                    <div class="ani-separator-2"></div>

                    <button type="submit" class="btn-large waves-effect waves-light" title="Click to log in.">Log in</button>
                </form>

                <div class="ani-separator-2"></div>
            </div>

            <div class="col s10 offset-s1">
                <a href="javascript:displaySignup();">Don't have an account? Sign up.</a>

                <div class="ani-separator-3"></div>
            </div>
        </div>
    </div>
</div> --}}